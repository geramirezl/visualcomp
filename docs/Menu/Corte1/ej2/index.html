<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Ejercicio 2 # Implement a color mapping application that helps people who are color blind see the colors around them.
CVD # Daltonismo o deficiencia de color(color vision deficiency) CVD, es una barrera para un uso eficiente del computador. Implementar una forma de asistir colores en una forma universal es necesario.
Implementacion de una aplicacion # Las dificultades se presentan dadas las distintas formas de daltonismo y sus varianzas de persona a persona."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Ejercicio 2 # Implement a color mapping application that helps people who are color blind see the colors around them.
CVD # Daltonismo o deficiencia de color(color vision deficiency) CVD, es una barrera para un uso eficiente del computador. Implementar una forma de asistir colores en una forma universal es necesario.
Implementacion de una aplicacion # Las dificultades se presentan dadas las distintas formas de daltonismo y sus varianzas de persona a persona."><meta property="og:type" content="article"><meta property="og:url" content="https://geramirezl.github.io/visualcomp/docs/Menu/Corte1/ej2/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-03-30T11:05:57-05:00"><title>Ej2 | Showcase Template</title><link rel=manifest href=/visualcomp/manifest.json><link rel=icon href=/visualcomp/favicon.png type=image/x-icon><link rel=stylesheet href=/visualcomp/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/visualcomp/flexsearch.min.js></script>
<script defer src=/visualcomp/en.search.min.c54cb0b85d98bce471dc5c99b81825538ca7dcde0cb774b6ea5817733a896b49.js integrity="sha256-xUywuF2YvORx3FyZuBglU4yn3N4Mt3S26lgXczqJa0k=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/visualcomp/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Menu</span><ul><li><input type=checkbox id=section-a24993e858734e2a47438db23047ae18 class=toggle checked>
<label for=section-a24993e858734e2a47438db23047ae18 class="flex justify-between"><a role=button>Corte1</a></label><ul><li><a href=/visualcomp/docs/Menu/Corte1/ej1/>Ej1</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej2/ class=active>Ej2</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej3/>Ej3</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej4/>Ej4</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej5/>Ej5</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej6/>Ej6</a></li></ul></li><li><input type=checkbox id=section-043ec1151eedb9eb9d051a3192c81258 class=toggle>
<label for=section-043ec1151eedb9eb9d051a3192c81258 class="flex justify-between"><a role=button>Corte2</a></label><ul><li><a href=/visualcomp/docs/Menu/Corte2/ej1/>Ej1</a></li></ul></li><li><input type=checkbox id=section-37fa7d2ca1a125edfd2dd33fadc1c2f9 class=toggle>
<label for=section-37fa7d2ca1a125edfd2dd33fadc1c2f9 class="flex justify-between"><a role=button>Corte3</a></label><ul><li><a href=/visualcomp/docs/Menu/Corte3/ej1/>Ej1</a></li></ul></li><li><input type=checkbox id=section-388bef96d17c2b11976e72fa3dd44910 class=toggle>
<label for=section-388bef96d17c2b11976e72fa3dd44910 class="flex justify-between"><a href=/visualcomp/docs/Menu/Members/>Members</a></label><ul><li><a href=/visualcomp/docs/Menu/Members/FabianMontes/>Fabian Montes</a></li><li><a href=/visualcomp/docs/Menu/Members/GabrielRamirez/>Gabriel Ramirez</a></li><li><a href=/visualcomp/docs/Menu/Members/JuanSierra/>Juan Sierra</a></li></ul></li><li><input type=checkbox id=section-2a8fcaa7f0b89ed89cd6417a1bdcdbd7 class=toggle>
<label for=section-2a8fcaa7f0b89ed89cd6417a1bdcdbd7 class="flex justify-between"><a href=/visualcomp/docs/Menu/p5/>P5</a></label><ul><li><a href=/visualcomp/docs/Menu/p5/Corte-2/>Corte 2</a></li><li><a href=/visualcomp/docs/Menu/p5/Corte-1/>Corte 1</a></li></ul></li></ul></li></ul><ul><li><a href=/visualcomp/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/visualcomp/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Ej2</strong>
<label for=toc-control><img src=/visualcomp/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#ejercicio-2>Ejercicio 2</a><ul><li><a href=#cvd>CVD</a></li><li><a href=#implementacion-de-una-aplicacion>Implementacion de una aplicacion</a><ul><li><a href=#lms>LMS</a></li></ul></li><li><a href=#explicacion-del-algoritmo>Explicacion del algoritmo</a></li><li><a href=#mapping-application>Mapping Application</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=ejercicio-2>Ejercicio 2
<a class=anchor href=#ejercicio-2>#</a></h1><p>Implement a color mapping application that helps people who are color blind see the colors around them.</p><h2 id=cvd>CVD
<a class=anchor href=#cvd>#</a></h2><p>Daltonismo o deficiencia de color(color vision deficiency) CVD, es una barrera para un uso eficiente del computador. Implementar
una forma de asistir colores en una forma universal es necesario.</p><h2 id=implementacion-de-una-aplicacion>Implementacion de una aplicacion
<a class=anchor href=#implementacion-de-una-aplicacion>#</a></h2><p>Las dificultades se presentan dadas las distintas formas de daltonismo y sus varianzas de persona a persona. Para ello nos asistimos
de los siguientes articulos</p><ul><li><a href=https://www.irjet.net/archives/V7/i5/IRJET-V7I5687.pdf>Color Blindness Algorithm Comparison for Developing an Android</a></li><li><a href=https://dl.acm.org/doi/10.1145/1240624.1240855>An interface to support color blind computer users</a></li><li><a href=http://vision.psychol.cam.ac.uk/jdmollon/papers/colourmaps.pdf>Digital Video Colourmaps for Checking the Legibility of Displays by Dichromats</a></li></ul><p>La idea es a partir de una imagen ingresada por el usuario, convertirla a una imagen visible para los distintos tipos de daltonismo.</p><h3 id=lms>LMS
<a class=anchor href=#lms>#</a></h3><p>El codigo se basa en el uso del espacio de color LMS, que representa la respuesta de los distintos conos del ojo humano: corto, mediano y largas longitudes de onda (long, medium, short)</p><p>La longitud de onda corta (S) esta asociada al azul, la longitud de onda mediana (M) esta asociada al verde y la longitud de onda larga (L) al rojo</p><h2 id=explicacion-del-algoritmo>Explicacion del algoritmo
<a class=anchor href=#explicacion-del-algoritmo>#</a></h2><p>La idea es convertir los datos de la imagen ingresada del espacio de color RGB al LMS, y luego a travez de la multiplicacion de una matriz de pesos especifica a cada uno de los tipos de daltonismo se ajusta a datos que el usuario pueda observar si sufre uno de estas deficiencias.</p><p>Por el momento solo estan aplicadas 3 formas de daltonismo: Protanope, Deuteranope, Tritanope</p><h2 id=mapping-application>Mapping Application
<a class=anchor href=#mapping-application>#</a></h2><details><summary>CÃ³digo</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/* 
</span></span></span><span style=display:flex><span><span style=color:#75715e>  Code based in the following articles:
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>https://dl.acm.org/doi/10.1145/1240624.1240855 (https://sci-hub.se/10.1145/1240624.1240855)
</span></span></span><span style=display:flex><span><span style=color:#75715e>https://www.irjet.net/archives/V7/i5/IRJET-V7I5687.pdf
</span></span></span><span style=display:flex><span><span style=color:#75715e>http://vision.psychol.cam.ac.uk/jdmollon/papers/colourmaps.pdf
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// https://dl.acm.org/doi/10.1145/1240624.1240855
</span></span></span><span style=display:flex><span><span style=color:#75715e>// https://sci-hub.se/10.1145/1240624.1240855
</span></span></span><span style=display:flex><span><span style=color:#75715e>// https://www.irjet.net/archives/V7/i5/IRJET-V7I5687.pdf
</span></span></span><span style=display:flex><span><span style=color:#75715e>// http://vision.psychol.cam.ac.uk/jdmollon/papers/colourmaps.pdf
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>Color.Vision.Daltonize : v0.1
</span></span></span><span style=display:flex><span><span style=color:#75715e>------------------------------
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34;Analysis of Color Blindness&#34; by Onur Fidaner, Poliang Lin and Nevran Ozguven.
</span></span></span><span style=display:flex><span><span style=color:#75715e>http://scien.stanford.edu/class/psych221/projects/05/ofidaner/project_report.pdf
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34;Digital Video Colourmaps for Checking the Legibility of Displays by Dichromats&#34; by FranÃÂ§oise
</span></span></span><span style=display:flex><span><span style=color:#75715e>ViÃÂ©not, Hans Brettel and John D. Mollon
</span></span></span><span style=display:flex><span><span style=color:#75715e>http://vision.psychol.cam.ac.uk/jdmollon/papers/colourmaps.pdf
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>CVDMatrix</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_a</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_b</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_c</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_d</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_e</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_f</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_g</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_h</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdi_i</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_a</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_b</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_c</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_d</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_e</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_f</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_g</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_h</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdd_i</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_a</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_b</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_c</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_d</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_e</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_f</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_g</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_h</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cvdt_i</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myImage</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myImageD</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myImageT</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>input</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>flag</span>; <span style=color:#75715e>// to verify if it already made the calculations
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>L</span>, <span style=color:#a6e22e>M</span>, <span style=color:#a6e22e>S</span>, <span style=color:#a6e22e>l</span>, <span style=color:#a6e22e>m</span>, <span style=color:#a6e22e>s</span>, <span style=color:#a6e22e>R</span>, <span style=color:#a6e22e>G</span>, <span style=color:#a6e22e>B</span>, <span style=color:#a6e22e>RR</span>, <span style=color:#a6e22e>GG</span>, <span style=color:#a6e22e>BB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ld</span>, <span style=color:#a6e22e>md</span>, <span style=color:#a6e22e>sd</span>, <span style=color:#a6e22e>Rd</span>, <span style=color:#a6e22e>Gd</span>, <span style=color:#a6e22e>Bd</span>, <span style=color:#a6e22e>RRd</span>, <span style=color:#a6e22e>GGd</span>, <span style=color:#a6e22e>BBd</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lt</span>, <span style=color:#a6e22e>mt</span>, <span style=color:#a6e22e>st</span>, <span style=color:#a6e22e>Rt</span>, <span style=color:#a6e22e>Gt</span>, <span style=color:#a6e22e>Bt</span>, <span style=color:#a6e22e>RRt</span>, <span style=color:#a6e22e>GGt</span>, <span style=color:#a6e22e>BBt</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>flag</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>CVDMatrix</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Color Vision Deficiency
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#e6db74>&#34;Protanope&#34;</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// reds are greatly reduced (1% men)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>2.02344</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>2.52581</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Deuteranope&#34;</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// greens are greatly reduced (1% men)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.494207</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.24827</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Tritanope&#34;</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// blues are greatly reduced (0.003% population)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.395913</span>, <span style=color:#ae81ff>0.801109</span>, <span style=color:#ae81ff>0.0</span>,
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>CVDMatrix</span>.<span style=color:#a6e22e>Protanope</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_a</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_c</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_d</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>3</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_e</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>4</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_f</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>5</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>6</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_h</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>7</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdi_i</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi</span>[<span style=color:#ae81ff>8</span>];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>CVDMatrix</span>.<span style=color:#a6e22e>Deuteranope</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_a</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_c</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_d</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>3</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_e</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>4</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_f</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>5</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>6</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_h</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>7</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdd_i</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd</span>[<span style=color:#ae81ff>8</span>];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>CVDMatrix</span>.<span style=color:#a6e22e>Tritanope</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_a</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_c</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_d</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>3</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_e</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>4</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_f</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>5</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>6</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_h</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>7</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>cvdt_i</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt</span>[<span style=color:#ae81ff>8</span>];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createFileInput</span>(<span style=color:#a6e22e>handleFile</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>2000</span>, <span style=color:#ae81ff>2000</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>(){
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>myImage</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>flag</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>255</span>)
</span></span><span style=display:flex><span>     <span style=color:#75715e>// resizeCanvas(myImage.width, myImage.height * 2, false);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>     <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>myImageD</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>myImageT</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>myImage</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>     <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>pixels</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// RGB to LMS matrix conversion
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>L</span> <span style=color:#f92672>=</span> (<span style=color:#ae81ff>17.8824</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>r</span>) <span style=color:#f92672>+</span> (<span style=color:#ae81ff>43.5161</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>g</span>) <span style=color:#f92672>+</span> (<span style=color:#ae81ff>4.11935</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>b</span>); 
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>M</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3.45565</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>27.1554</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>3.86714</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>b</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>S</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0299566</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.184309</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.46709</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>b</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>l</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi_a</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdi_b</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdi_c</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>m</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi_d</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdi_e</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdi_f</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>s</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdi_g</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdi_h</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdi_i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ld</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd_a</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdd_b</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdd_c</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>md</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd_d</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdd_e</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdd_f</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>sd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdd_g</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdd_h</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdd_i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>lt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt_a</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdt_b</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdt_c</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>mt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt_d</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdt_e</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdt_f</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>st</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cvdt_g</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>L</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdt_h</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cvdt_i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>S</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// LMS to RGB matrix conversion
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>R</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0809444479</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>l</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>m</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.116721066</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>s</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>G</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>l</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0540193266</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>m</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.113614708</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>s</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>B</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>l</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>m</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.693511405</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>s</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0809444479</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>ld</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>md</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.116721066</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>sd</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>ld</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0540193266</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>md</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.113614708</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>sd</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Bd</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>ld</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>md</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.693511405</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>sd</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0809444479</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>lt</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.130504409</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>mt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.116721066</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>st</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.0102485335</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>lt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0540193266</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>mt</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.113614708</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>st</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Bt</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.000365296938</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>lt</span> <span style=color:#f92672>+</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>0.00412161469</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>mt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.693511405</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>st</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Isolate invisible colors to color vision deficiency (calculate error matrix)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>R</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>R</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>G</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>G</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>B</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>B</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>Rd</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>Gd</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Bd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>Bd</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>Rt</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>Gt</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Bt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>Bt</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Shift colors towards visible spectrum (apply error modification)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>RR</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>R</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>G</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>B</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>GG</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.7</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>R</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>G</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>B</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>BB</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.7</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>R</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>G</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>B</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>RRd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Bd</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>GGd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.7</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Bd</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>BBd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.7</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Bd</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>RRt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Bt</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>GGt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.7</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Bt</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>BBt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.7</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>Bt</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Add compensation to original values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>R</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>RR</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>r</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>G</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>GG</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>g</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>B</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BB</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>RRd</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>r</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>GGd</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>g</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Bd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BBd</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>;
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>RRt</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>r</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>GGt</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>g</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Bt</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BBt</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>;
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Clamp values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>R</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>R</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>R</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>R</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>G</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>G</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>G</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>G</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>B</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>B</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>B</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>B</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Rd</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Rd</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Gd</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Gd</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Bd</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>Bd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Bd</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>Bd</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Rt</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Rt</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Gt</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Gt</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Bt</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#a6e22e>Bt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>Bt</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>255</span>) <span style=color:#a6e22e>Bt</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>R</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>G</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>B</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;  
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>         
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImageD</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>Rd</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImageD</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>Gd</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImageD</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>Bd</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;  
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImageT</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>Rt</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImageT</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>Gt</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>myImageT</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>Bt</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#ae81ff>0</span>;  
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myImageD</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myImageT</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>myImage</span>, <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>width</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>myImageD</span>, <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>myImageT</span>, <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>myImage</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>flag</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleFile</span>(<span style=color:#a6e22e>file</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;image&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myImage</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myImageD</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myImageT</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myImage</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>flag</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><iframe id=ColorBlindness style=width:800px;height:600px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/visualcomp/sketches/ColorBlindness.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://geramirezl.github.io/visualcomp/commit/8de8c9a650fbe26c31425e1d0a37656a8744a657 title='Last modified by FabianMontes | March 30, 2023' target=_blank rel=noopener><img src=/visualcomp/svg/calendar.svg class=book-icon alt=Calendar>
<span>March 30, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#ejercicio-2>Ejercicio 2</a><ul><li><a href=#cvd>CVD</a></li><li><a href=#implementacion-de-una-aplicacion>Implementacion de una aplicacion</a><ul><li><a href=#lms>LMS</a></li></ul></li><li><a href=#explicacion-del-algoritmo>Explicacion del algoritmo</a></li><li><a href=#mapping-application>Mapping Application</a></li></ul></li></ul></nav></div></aside></main></body></html>