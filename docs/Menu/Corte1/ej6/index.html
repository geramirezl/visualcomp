<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Ejercicio 6 # Implement an animation with keyframes using the nub library for Processing (Java).
Esta Es una previa de lo que realiza el codigo: Introduccion # La coherencia Temporal es un fenomeno visual presente en la naturalezapor el cual el color percibidoen un punto dado una region de interes tiende a variar mas acordemente a el tiempo pasado entre dos momentos dados. En este ejercicio vamos a visualizar esta coherencia temporal en una animacion por medio de Fotogramas claves y transfomacion de un objeto."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Ejercicio 6 # Implement an animation with keyframes using the nub library for Processing (Java).
Esta Es una previa de lo que realiza el codigo: Introduccion # La coherencia Temporal es un fenomeno visual presente en la naturalezapor el cual el color percibidoen un punto dado una region de interes tiende a variar mas acordemente a el tiempo pasado entre dos momentos dados. En este ejercicio vamos a visualizar esta coherencia temporal en una animacion por medio de Fotogramas claves y transfomacion de un objeto."><meta property="og:type" content="article"><meta property="og:url" content="https://geramirezl.github.io/visualcomp/docs/Menu/Corte1/ej6/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-04-03T00:32:27-05:00"><title>Ej6 | Showcase Template</title><link rel=manifest href=/visualcomp/manifest.json><link rel=icon href=/visualcomp/favicon.png type=image/x-icon><link rel=stylesheet href=/visualcomp/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/visualcomp/flexsearch.min.js></script>
<script defer src=/visualcomp/en.search.min.c54cb0b85d98bce471dc5c99b81825538ca7dcde0cb774b6ea5817733a896b49.js integrity="sha256-xUywuF2YvORx3FyZuBglU4yn3N4Mt3S26lgXczqJa0k=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/visualcomp/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Menu</span><ul><li><input type=checkbox id=section-a24993e858734e2a47438db23047ae18 class=toggle checked>
<label for=section-a24993e858734e2a47438db23047ae18 class="flex justify-between"><a href=/visualcomp/docs/Menu/Corte1/>Corte1</a></label><ul><li><a href=/visualcomp/docs/Menu/Corte1/ej1/>Ej1</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej2/>Ej2</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej3/>Ej3</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej4/>Ej4</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej5/>Ej5</a></li><li><a href=/visualcomp/docs/Menu/Corte1/ej6/ class=active>Ej6</a></li></ul></li><li><input type=checkbox id=section-043ec1151eedb9eb9d051a3192c81258 class=toggle>
<label for=section-043ec1151eedb9eb9d051a3192c81258 class="flex justify-between"><a role=button>Corte2</a></label><ul><li><a href=/visualcomp/docs/Menu/Corte2/Color-Blending/>Color Blending</a></li><li><a href=/visualcomp/docs/Menu/Corte2/procedural/>Procedural</a></li></ul></li><li><input type=checkbox id=section-37fa7d2ca1a125edfd2dd33fadc1c2f9 class=toggle>
<label for=section-37fa7d2ca1a125edfd2dd33fadc1c2f9 class="flex justify-between"><a role=button>Corte3</a></label><ul></ul></li><li><input type=checkbox id=section-388bef96d17c2b11976e72fa3dd44910 class=toggle>
<label for=section-388bef96d17c2b11976e72fa3dd44910 class="flex justify-between"><a role=button>Members</a></label><ul><li><a href=/visualcomp/docs/Menu/Members/FabianMontes/>Fabian Montes</a></li><li><a href=/visualcomp/docs/Menu/Members/GabrielRamirez/>Gabriel Ramirez</a></li><li><a href=/visualcomp/docs/Menu/Members/JuanSierra/>Juan Sierra</a></li></ul></li></ul></li></ul><ul><li><a href=/visualcomp/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/visualcomp/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Ej6</strong>
<label for=toc-control><img src=/visualcomp/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#ejercicio-6>Ejercicio 6</a><ul><li><a href=#introduccion>Introduccion</a></li><li><a href=#transfondo-o-teoria>Transfondo o Teoria</a><ul><li><a href=#frames>Frames</a></li><li><a href=#transición-y-transformación>Transición y transformación.</a></li></ul></li><li><a href=#linea-de-tiempo>Linea de Tiempo</a></li><li><a href=#codigo-utilizado>Codigo utilizado</a></li><li><a href=#resultado>Resultado</a></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#trabajos-futuros>Trabajos Futuros</a><ul><li><a href=#extra>Extra</a></li></ul></li><li><a href=#resources>Resources</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=ejercicio-6>Ejercicio 6
<a class=anchor href=#ejercicio-6>#</a></h1><p>Implement an animation with keyframes using the <a href=https://github.com/VisualComputing/nub/blob/master/examples/basics/KeyFrames/KeyFrames.pde>nub library</a> for <a href=https://processing.org>Processing</a> (Java).</p><p>Esta Es una previa de lo que realiza el codigo:
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script><div id=video></div><script>new p5(e=>{let t;e.setup=function(){e.createCanvas(808,472),animati=e.createVideo(["/visualcomp/sketches/animation.mp4"]),animati.hide()},e.draw=function(){e.background(150),e.image(animati,0,0)},e.mousePressed=function(){animati.loop()}},"video")</script></p><h2 id=introduccion>Introduccion
<a class=anchor href=#introduccion>#</a></h2><p>La coherencia Temporal es un fenomeno visual presente en la naturalezapor el cual el color percibidoen un punto dado una region de interes tiende a variar mas acordemente a el tiempo pasado entre dos momentos dados.
En este ejercicio vamos a visualizar esta coherencia temporal en una animacion por medio de Fotogramas claves y transfomacion de un objeto.
Replicando en mayor medida lo que se puede realizar por medio de la libreria <a href=https://github.com/VisualComputing/nub/blob/master/examples/basics/KeyFrames/KeyFrames.pde>nub</a>.</p><p>Para el diseño de los botones para interactuar con la animacion, se tomo inspiracion en las diversas aplicaciones de modelado y creacion de animaciones o juegos o edicion de video, como son <a href=https://www.blender.org>Blender</a> o <a href=https://unity.com/es>Unity</a></p><h2 id=transfondo-o-teoria>Transfondo o Teoria
<a class=anchor href=#transfondo-o-teoria>#</a></h2><h3 id=frames>Frames
<a class=anchor href=#frames>#</a></h3><p>Refiriendonos al propio Canvas que trabajamos, un Frame o Fotograma Es cada instancia de tiempo donde dibujamos una imagen estatica en el mismo, cada variacion o cada vez que se llama a la funcion draw, se genera un Frame.
En animacion es cada una de las imagenes que forman esta animacion al momento de recorrer todos los frames de forma rapida.</p><h4 id=keyframes>KeyFrames.
<a class=anchor href=#keyframes>#</a></h4><p>Los KeyFrames, o frames clave son puntos en la animacion que marcan el inicio y el final de una transicion.
La importancia de los mismos a la hora de animar, es que permiten dar una ligera percepcion de lo que se busca realizar en la transición, marcando cada Frame que determina un momento importante en la animación.</p><h3 id=transición-y-transformación>Transición y transformación.
<a class=anchor href=#transici%c3%b3n-y-transformaci%c3%b3n>#</a></h3><p>Una Transición es una accion o transformacion que realiza nuestro objeto dentro de la animacion a lo largo de un segmento de tiempo.</p><p>Las Transformacion son variaciones que se realizan a alguna variable del objeto, estas estan definidas variaciones se definen por medio de la <a href=https://definicion.de/razon-de-cambio/>razón de cambio</a> de dicha variable entre el keyFrame inicial y final de dicha Transicion. Lo definimos segun la razon de cambio para calcular los valores de las variables a partir de los diferentes tiempos en el segmento de la Transición.</p><h4 id=valores-variables>valores variables
<a class=anchor href=#valores-variables>#</a></h4><p>Los diversos valores que se usaran como variables por medio de transformaciones seran:</p><ul><li>Su posicion, variando los valores X y Y.</li><li>Su Escala, variando su largo y ancho.</li><li>Su angulo de rotacion, o la inclinacion de la figura.</li></ul><blockquote class="book-hint info"><strong>Botones</strong><br>Los primeros 3 botones Rot, Esc, Pos, permiten designar la variable a modificar por medio del arrastre del mouse.
(Tambien es posible alterar que figura se modifica con los botones &ldquo;l+&rdquo; y &ldquo;l-&rdquo; pero estos cambios son constantes durante toda la animación)</blockquote><h2 id=linea-de-tiempo>Linea de Tiempo
<a class=anchor href=#linea-de-tiempo>#</a></h2><p>En La animacion la linea de tiempo es una forma utilizada para visualizar y ubicar los diversos frames de la misma.
Esta nos ayudara a ver en que frame nos encontramos, donde se ubican los key, y movernos con mayor facilidad a travez de los mismos</p><blockquote class="book-hint info"><strong>Linea de Tiempo</strong><br>La linea de tiempo se escuentra justo encima de los botones, siendo los frames de colores KeyFrames, para desplazarse a travez de los mismos usar la linea que marca el frame actual.</blockquote><h2 id=codigo-utilizado>Codigo utilizado
<a class=anchor href=#codigo-utilizado>#</a></h2><details><summary>Código Completo</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>figi</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>Ation</span>,<span style=color:#a6e22e>modes</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>timeline</span>,<span style=color:#a6e22e>keyFrma</span>,<span style=color:#a6e22e>rot</span>,<span style=color:#a6e22e>esc</span>,<span style=color:#a6e22e>pos</span>,<span style=color:#a6e22e>del</span>,<span style=color:#a6e22e>addw</span>,<span style=color:#a6e22e>runn</span>,<span style=color:#a6e22e>lma</span>,<span style=color:#a6e22e>lme</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>xref</span>,<span style=color:#a6e22e>yref</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>fair</span>,<span style=color:#a6e22e>linee</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>divv</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>600</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fair</span><span style=color:#f92672>=</span><span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>linee</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Fig</span>(<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>75</span>,<span style=color:#ae81ff>75</span>,<span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>([<span style=color:#ae81ff>25</span>,<span style=color:#ae81ff>200</span>,<span style=color:#ae81ff>200</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>([<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>300</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>([<span style=color:#ae81ff>75</span>,<span style=color:#ae81ff>300</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>])
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>([<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>75</span>,<span style=color:#ae81ff>75</span>,<span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>])
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Ation</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>divv</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timeline</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Slider</span>(<span style=color:#e6db74>&#39;&#39;</span>,<span style=color:#ae81ff>1</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>60</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>divv</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>colore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>255</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>chaTime</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>keyFrma</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>25</span>,<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>75</span>,<span style=color:#ae81ff>100</span>]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rot</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;Rot&#39;</span>,<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rot</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>rota</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rot</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>esc</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;Esc&#39;</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>esc</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>esca</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>esc</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pos</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;Pos&#39;</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span><span style=color:#f92672>*</span><span style=color:#ae81ff>2</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pos</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>posa</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pos</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>del</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;Del&#39;</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>del</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>del</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>deleKF</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addw</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;Add&#39;</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addw</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addw</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>addKF</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runn</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;run&#39;</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span><span style=color:#f92672>*</span><span style=color:#ae81ff>5</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runn</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>runche</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runn</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lma</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;l+&#39;</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>7</span><span style=color:#f92672>*</span><span style=color:#ae81ff>6</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lma</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>14</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lma</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>lm</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lme</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;l-&#39;</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>14</span><span style=color:#f92672>*</span><span style=color:#ae81ff>13</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lme</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>14</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lme</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>ln</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>modes</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;position&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xref</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>yref</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>draw</span>()
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Timinggg()
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>Mode</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runni</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Fig</span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>w</span>,<span style=color:#a6e22e>h</span>,<span style=color:#a6e22e>rotation</span>,<span style=color:#a6e22e>sides</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>w</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#a6e22e>h</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#a6e22e>rotation</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span><span style=color:#f92672>=</span>[[<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>w</span>,<span style=color:#a6e22e>h</span>,<span style=color:#a6e22e>rotation</span>]];
</span></span><span style=display:flex><span>    <span style=color:#75715e>//print(this.keyFrames[0])
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>=</span><span style=color:#a6e22e>sides</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0.5</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span><span style=color:#f92672>=</span><span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>up</span><span style=color:#f92672>=</span><span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>(){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span><span style=color:#f92672>-</span><span style=color:#a6e22e>col</span>,<span style=color:#ae81ff>255</span>,<span style=color:#a6e22e>col</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotate</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>beginShape</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e>//print(this.keyFrames)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>line</span>(<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>0</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>triangle</span>(<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>rect</span>(<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ellipse</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    } 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>endShape</span>(<span style=color:#a6e22e>CLOSE</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>point</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotate</span>(<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>keyss</span>(<span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>==</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>up</span>, <span style=color:#a6e22e>down</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>up</span><span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>down</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>down</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>]
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>up</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>]
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>middle</span>(<span style=color:#a6e22e>down</span>,<span style=color:#a6e22e>up</span>,<span style=color:#a6e22e>timees</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>down</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>kisy</span>(<span style=color:#a6e22e>times</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#a6e22e>times</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> [<span style=color:#a6e22e>i</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>)];
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>changeTime</span>(<span style=color:#a6e22e>Time</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keya</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>kisy</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]]<span style=color:#f92672>=</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyss</span>(<span style=color:#a6e22e>Time</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>//print(key)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span><span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span><span style=color:#f92672>=</span><span style=color:#a6e22e>Time</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>middle</span>(<span style=color:#a6e22e>down</span>,<span style=color:#a6e22e>up</span>,<span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>difTim</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dx</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>1</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dy</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>2</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>2</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dw</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>3</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>3</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dh</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>4</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>4</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dr</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>5</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>5</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>timb</span><span style=color:#f92672>=</span><span style=color:#a6e22e>timees</span><span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dx</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>2</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dy</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>3</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dw</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>4</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dh</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>5</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dr</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>changeFig</span>(<span style=color:#a6e22e>more</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>+</span><span style=color:#a6e22e>more</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>4</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>deleteKeyFram</span>(<span style=color:#a6e22e>time</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keya</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>kisy</span>(<span style=color:#a6e22e>time</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span><span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> ){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>pop</span>()
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>onw</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>concat</span>(<span style=color:#a6e22e>dow</span>)
</span></span><span style=display:flex><span>      }     
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>keya</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addKeyFram</span>(<span style=color:#a6e22e>time</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keya</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>kisy</span>(<span style=color:#a6e22e>time</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>([<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>])
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>==</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>time</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>([<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>])
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>we</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>=</span>[<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>]
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>we</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>time</span>){
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>onw</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>push</span>([<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>])
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>i</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>concat</span>(<span style=color:#a6e22e>dow</span>)
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>time</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>presss</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span> <span style=color:#f92672>=</span><span style=color:#a6e22e>x</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>up</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>move</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>escalat</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>w</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>h</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>w</span>)<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>h</span>)){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>up</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>-</span>(<span style=color:#a6e22e>h</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>h</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>-</span>(<span style=color:#a6e22e>w</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>w</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rotate</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>xx</span>,<span style=color:#a6e22e>yy</span>){
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>x1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>y1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>lent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x1</span>,<span style=color:#a6e22e>y1</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>y1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>x1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b1</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>x1</span><span style=color:#f92672>*</span><span style=color:#a6e22e>m1</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>x2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>xx</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>y2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>yy</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x2</span>,<span style=color:#a6e22e>y2</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>y2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>x2</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m3</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>m1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m1</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x1</span><span style=color:#f92672>==</span><span style=color:#a6e22e>x2</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>y2</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m3</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>y1</span><span style=color:#f92672>==</span><span style=color:#a6e22e>y2</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b3</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>x2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>m3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y2</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x4</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>b1</span><span style=color:#f92672>-</span><span style=color:#a6e22e>b3</span>)<span style=color:#f92672>/</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span><span style=color:#f92672>+</span><span style=color:#a6e22e>m3</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>b3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>m3</span><span style=color:#f92672>*</span><span style=color:#a6e22e>x4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>angle</span><span style=color:#f92672>=</span> (<span style=color:#a6e22e>m2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span>)<span style=color:#f92672>*</span><span style=color:#a6e22e>atan</span>(<span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>x4</span>,<span style=color:#a6e22e>y2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>y4</span>)<span style=color:#f92672>/</span><span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x4</span>,<span style=color:#a6e22e>y4</span>))<span style=color:#f92672>/</span><span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(isNaN(<span style=color:#a6e22e>angle</span>)){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>angle</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>Mode</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rot</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>esc</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pos</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>del</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addw</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runn</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lma</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lme</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  <span style=color:#75715e>//print(keyFrma)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>keyFrma</span>[<span style=color:#a6e22e>i</span>],<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>255</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>xx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>keyFrma</span>[<span style=color:#a6e22e>i</span>],<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>1</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span><span style=color:#f92672>-</span><span style=color:#a6e22e>col</span>,<span style=color:#ae81ff>255</span>,<span style=color:#a6e22e>col</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rect</span>(<span style=color:#a6e22e>xx</span><span style=color:#f92672>-</span><span style=color:#a6e22e>divv</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>40</span>,<span style=color:#a6e22e>divv</span>,<span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>text</span>(<span style=color:#a6e22e>modes</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>15</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mouseReleased</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#75715e>//keyFrma.released();
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>rot</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>esc</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pos</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>del</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addw</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runn</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lma</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lme</span>.<span style=color:#a6e22e>released</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Ation</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mousePressed</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xref</span><span style=color:#f92672>=</span><span style=color:#a6e22e>mouseX</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>yref</span><span style=color:#f92672>=</span><span style=color:#a6e22e>mouseY</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rot</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>esc</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pos</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>del</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addw</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runn</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lma</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lme</span>.<span style=color:#a6e22e>Pressed</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>height</span><span style=color:#f92672>-</span><span style=color:#ae81ff>60</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>mouseY</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Ation</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>presss</span>(<span style=color:#a6e22e>mouseX</span>,<span style=color:#a6e22e>mouseY</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mouseDragged</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>Dragged</span>()
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>Ation</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>modes</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;rotation&#39;</span>){
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rotatew</span>()
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>modes</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;escalar&#39;</span>){
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>escalat</span>()
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>posat</span>()
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>rotatew</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>rotate</span>(<span style=color:#a6e22e>xref</span>,<span style=color:#a6e22e>yref</span>,<span style=color:#a6e22e>mouseX</span>,<span style=color:#a6e22e>mouseY</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xref</span><span style=color:#f92672>=</span><span style=color:#a6e22e>mouseX</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>yref</span><span style=color:#f92672>=</span><span style=color:#a6e22e>mouseY</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>escalat</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>escalat</span>(<span style=color:#a6e22e>xref</span>,<span style=color:#a6e22e>mouseX</span><span style=color:#f92672>-</span><span style=color:#a6e22e>xref</span>,<span style=color:#a6e22e>yref</span>,<span style=color:#a6e22e>mouseY</span><span style=color:#f92672>-</span><span style=color:#a6e22e>yref</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xref</span><span style=color:#f92672>=</span><span style=color:#a6e22e>mouseX</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>yref</span><span style=color:#f92672>=</span><span style=color:#a6e22e>mouseY</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>posat</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>move</span>(<span style=color:#a6e22e>mouseX</span><span style=color:#f92672>-</span><span style=color:#a6e22e>xref</span>,<span style=color:#a6e22e>mouseY</span><span style=color:#f92672>-</span><span style=color:#a6e22e>yref</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>xref</span><span style=color:#f92672>=</span><span style=color:#a6e22e>mouseX</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>yref</span><span style=color:#f92672>=</span><span style=color:#a6e22e>mouseY</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Button</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>label</span>,<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>){
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#ae81ff>10</span><span style=color:#f92672>*</span><span style=color:#a6e22e>label</span>.<span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#ae81ff>20</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#a6e22e>label</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>colore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>200</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isPressed</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alpha</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {}
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>draw</span>(){
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>noStroke</span>()
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>bart</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>colore</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isPressed</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>bart</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>lerpColor</span>(<span style=color:#a6e22e>bart</span>, <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>), <span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>bart</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>rect</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>textWidth</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>text</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>label</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>/</span><span style=color:#ae81ff>10</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>3</span><span style=color:#f92672>*</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>alpha</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alpha</span><span style=color:#f92672>=</span><span style=color:#a6e22e>alpha</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Pressed</span>(){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>mouseX</span><span style=color:#f92672>&gt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mouseX</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span> <span style=color:#f92672>&amp;&amp;</span><span style=color:#a6e22e>mouseY</span><span style=color:#f92672>&gt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mouseY</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isPressed</span><span style=color:#f92672>=</span><span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alpha</span>()  
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>released</span>(){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isPressed</span><span style=color:#f92672>=</span><span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>colos</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>colore</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>colos</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Slider</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Button</span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>label</span>,<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>ini</span>,<span style=color:#a6e22e>end</span>,<span style=color:#a6e22e>value</span>,<span style=color:#a6e22e>step</span>){
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>label</span>,<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>max</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,(<span style=color:#a6e22e>end</span><span style=color:#f92672>-</span><span style=color:#a6e22e>ini</span>)<span style=color:#f92672>+</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>//this.h= this.h/3*5
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ini</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ini</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>end</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>step</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>colore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alpha</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {}
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>(){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rect</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>al</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>label</span>.<span style=color:#a6e22e>lenght</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>textSize</span>(<span style=color:#ae81ff>13</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>text</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>label</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>5</span><span style=color:#f92672>*</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>100</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>al</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    }    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rect</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>-</span><span style=color:#a6e22e>al</span>),<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#a6e22e>al</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>colore</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rect</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span><span style=color:#f92672>/</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>end</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ini</span>)<span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span><span style=color:#f92672>/</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>end</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ini</span>)<span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>-</span><span style=color:#a6e22e>al</span>),<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span><span style=color:#f92672>/</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>end</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ini</span>),<span style=color:#a6e22e>al</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span>(){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setValue</span>(<span style=color:#a6e22e>val</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>val</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#ae81ff>0</span>,(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>end</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ini</span>)<span style=color:#f92672>/</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span>,<span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span>((<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ini</span>)<span style=color:#f92672>/</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span>)<span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>//print(this.valuee)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alpha</span>()
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Pressed</span>(){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>al</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>label</span>.<span style=color:#a6e22e>lenght</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>al</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    } 
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>mouseX</span><span style=color:#f92672>&gt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mouseX</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span> <span style=color:#f92672>&amp;&amp;</span><span style=color:#a6e22e>mouseY</span><span style=color:#f92672>&gt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>-</span><span style=color:#a6e22e>al</span>) <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mouseY</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span><span style=color:#a6e22e>al</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isPressed</span><span style=color:#f92672>=</span><span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Dragged</span>(){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isPressed</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>mouseX</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#ae81ff>0</span>,(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>end</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ini</span>)<span style=color:#f92672>/</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span>,<span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span>((<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>valuee</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span><span style=color:#f92672>+</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ini</span>)<span style=color:#f92672>/</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span>)<span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>step</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>//print(this.valuee)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>alpha</span>()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>rota</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>modes</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;rotation&#39;</span>;  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>esca</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>modes</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;escalar&#39;</span>;  
</span></span><span style=display:flex><span>} 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>posa</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>modes</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;position&#39;</span>;  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>len</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sqrt</span>(<span style=color:#a6e22e>x</span><span style=color:#f92672>*</span><span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y</span><span style=color:#f92672>*</span><span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>len</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>chaTime</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>changeTime</span>(<span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>value</span>())
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span><span style=color:#a6e22e>fair</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>linee</span><span style=color:#f92672>=</span><span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>value</span>(),<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>width</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>runni</span>(){
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>fair</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>linee</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>linee</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>width</span>){
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>linee</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>setValue</span>(<span style=color:#a6e22e>linee</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>runche</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fair</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>fair</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>lm</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>changeFig</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>ln</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>changeFig</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>deleKF</span>(){
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keya</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>deleteKeyFram</span>(<span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>value</span>())
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span><span style=color:#f92672>!=</span><span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>onw</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dow</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>,<span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>length</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>keyFrma</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>concat</span>(<span style=color:#a6e22e>dow</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>addKF</span>(){
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>choice</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>figi</span>.<span style=color:#a6e22e>addKeyFram</span>(<span style=color:#a6e22e>timeline</span>.<span style=color:#a6e22e>value</span>())
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>choice</span><span style=color:#f92672>!=</span><span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>choice</span>)
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>==</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keyFrma</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>choice</span>){
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>choice</span>)
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>we</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>keyFrma</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>keyFrma</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>=</span><span style=color:#a6e22e>choice</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>we</span>)
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keyFrma</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>choice</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>onw</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>choice</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dow</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>i</span>,<span style=color:#a6e22e>keyFrma</span>.<span style=color:#a6e22e>length</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>keyFrma</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>concat</span>(<span style=color:#a6e22e>dow</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><p>Todo el codigo gira en torno a la figura &ldquo;figi&rdquo;, el objeto de la clase Fig.</p><details><summary>Clase Fig</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Fig</span>{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>w</span>,<span style=color:#a6e22e>h</span>,<span style=color:#a6e22e>rotation</span>,<span style=color:#a6e22e>sides</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#a6e22e>w</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#a6e22e>h</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#a6e22e>rotation</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span><span style=color:#f92672>=</span>[[<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>w</span>,<span style=color:#a6e22e>h</span>,<span style=color:#a6e22e>rotation</span>]];
</span></span><span style=display:flex><span>    <span style=color:#75715e>//print(this.keyFrames[0])
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>=</span><span style=color:#a6e22e>sides</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0.5</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span><span style=color:#f92672>=</span><span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>up</span><span style=color:#f92672>=</span><span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>(){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span><span style=color:#f92672>-</span><span style=color:#a6e22e>col</span>,<span style=color:#ae81ff>255</span>,<span style=color:#a6e22e>col</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotate</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>beginShape</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e>//print(this.keyFrames)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>line</span>(<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>0</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>triangle</span>(<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>rect</span>(<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ellipse</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    } 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>endShape</span>(<span style=color:#a6e22e>CLOSE</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>point</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotate</span>(<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>keyss</span>(<span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>==</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>up</span>, <span style=color:#a6e22e>down</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>up</span><span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>down</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>down</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>]
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>up</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>]
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>middle</span>(<span style=color:#a6e22e>down</span>,<span style=color:#a6e22e>up</span>,<span style=color:#a6e22e>timees</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>down</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>kisy</span>(<span style=color:#a6e22e>times</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#a6e22e>times</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> [<span style=color:#a6e22e>i</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>)];
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>changeTime</span>(<span style=color:#a6e22e>Time</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keya</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>kisy</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]]<span style=color:#f92672>=</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyss</span>(<span style=color:#a6e22e>Time</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>//print(key)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span><span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span><span style=color:#f92672>=</span><span style=color:#a6e22e>Time</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>middle</span>(<span style=color:#a6e22e>down</span>,<span style=color:#a6e22e>up</span>,<span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>difTim</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dx</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>1</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dy</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>2</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>2</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dw</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>3</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>3</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dh</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>4</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>4</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dr</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>5</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>5</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>timb</span><span style=color:#f92672>=</span><span style=color:#a6e22e>timees</span><span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dx</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>2</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dy</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>3</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dw</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>4</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dh</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>5</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dr</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>changeFig</span>(<span style=color:#a6e22e>more</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>+</span><span style=color:#a6e22e>more</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>4</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sides</span><span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>deleteKeyFram</span>(<span style=color:#a6e22e>time</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keya</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>kisy</span>(<span style=color:#a6e22e>time</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span><span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> ){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>pop</span>()
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>onw</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>concat</span>(<span style=color:#a6e22e>dow</span>)
</span></span><span style=display:flex><span>      }     
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>keya</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>addKeyFram</span>(<span style=color:#a6e22e>time</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keya</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>kisy</span>(<span style=color:#a6e22e>time</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>([<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>])
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>==</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>time</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>([<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>])
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>we</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>=</span>[<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>]
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>we</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>time</span>){
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>onw</span><span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>push</span>([<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>])
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dow</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>i</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span><span style=color:#f92672>=</span> <span style=color:#a6e22e>onw</span>.<span style=color:#a6e22e>concat</span>(<span style=color:#a6e22e>dow</span>)
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>time</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>presss</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span> <span style=color:#f92672>=</span><span style=color:#a6e22e>x</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>up</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>move</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>escalat</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>w</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>h</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>w</span>)<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>h</span>)){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>up</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>-</span>(<span style=color:#a6e22e>h</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>h</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>-</span>(<span style=color:#a6e22e>w</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>w</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rotate</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>xx</span>,<span style=color:#a6e22e>yy</span>){
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>x1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>y1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>lent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x1</span>,<span style=color:#a6e22e>y1</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>y1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>x1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b1</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>x1</span><span style=color:#f92672>*</span><span style=color:#a6e22e>m1</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>x2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>xx</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>y2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>yy</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x2</span>,<span style=color:#a6e22e>y2</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>y2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>x2</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m3</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>m1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m1</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x1</span><span style=color:#f92672>==</span><span style=color:#a6e22e>x2</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>y2</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m3</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>y1</span><span style=color:#f92672>==</span><span style=color:#a6e22e>y2</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b3</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>x2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>m3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y2</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x4</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>b1</span><span style=color:#f92672>-</span><span style=color:#a6e22e>b3</span>)<span style=color:#f92672>/</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span><span style=color:#f92672>+</span><span style=color:#a6e22e>m3</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>b3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>m3</span><span style=color:#f92672>*</span><span style=color:#a6e22e>x4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>angle</span><span style=color:#f92672>=</span> (<span style=color:#a6e22e>m2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span>)<span style=color:#f92672>*</span><span style=color:#a6e22e>atan</span>(<span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>x4</span>,<span style=color:#a6e22e>y2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>y4</span>)<span style=color:#f92672>/</span><span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x4</span>,<span style=color:#a6e22e>y4</span>))<span style=color:#f92672>/</span><span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(isNaN(<span style=color:#a6e22e>angle</span>)){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>angle</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><p>La Clase Fig sirve para manipular todo lo que respecta a la figura mostrada, conteniendo los datos actuales de posiscion escalado rotacion y lados (que determina la forma de la figura). La funcion draw() dibuja la figura basandose en los valores actuales. la funcion kisy() revisa si nos encontramos en un Frame que es KeyFrame, y la funcion changeFig() es un get de la variable sides, que limita los valores posibles, por ultimo press() funciona para dar un apoyo a la posicion donde se presiono el mouse para ayudar a escalar.</p><p>Por otro lado tenemos las funciones que varian la informacion dentro del Frame que nos encontramos: move(), escalat(), rotate().
Cada una de estas varia una de las variables de la figura, su posicion escalado y rotacion respectivamente.</p><details open><summary>Move Escalat Rotate</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>move</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span><span style=color:#f92672>+</span><span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>escalat</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>w</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>h</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>w</span>)<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>h</span>)){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>up</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>-</span>(<span style=color:#a6e22e>h</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>h</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>left</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>-</span>(<span style=color:#a6e22e>w</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>w</span><span style=color:#f92672>*</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>escalats</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rotate</span>(<span style=color:#a6e22e>x</span>,<span style=color:#a6e22e>y</span>,<span style=color:#a6e22e>xx</span>,<span style=color:#a6e22e>yy</span>){
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>x1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>y1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>lent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x1</span>,<span style=color:#a6e22e>y1</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y1</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>y1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>x1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b1</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>x1</span><span style=color:#f92672>*</span><span style=color:#a6e22e>m1</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>x2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>xx</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>y2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>yy</span><span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x2</span>,<span style=color:#a6e22e>y2</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>x2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>y2</span><span style=color:#f92672>=</span><span style=color:#a6e22e>y2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>lent</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>y2</span><span style=color:#f92672>/</span><span style=color:#a6e22e>x2</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>m3</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#a6e22e>m1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m1</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x1</span><span style=color:#f92672>==</span><span style=color:#a6e22e>x2</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>y2</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m3</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>y1</span><span style=color:#f92672>==</span><span style=color:#a6e22e>y2</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b3</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>x2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>m3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>y2</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x4</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>b1</span><span style=color:#f92672>-</span><span style=color:#a6e22e>b3</span>)<span style=color:#f92672>/</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span><span style=color:#f92672>+</span><span style=color:#a6e22e>m3</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>b3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>m3</span><span style=color:#f92672>*</span><span style=color:#a6e22e>x4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>angle</span><span style=color:#f92672>=</span> (<span style=color:#a6e22e>m2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span>)<span style=color:#f92672>*</span><span style=color:#a6e22e>atan</span>(<span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>x4</span>,<span style=color:#a6e22e>y2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>y4</span>)<span style=color:#f92672>/</span><span style=color:#a6e22e>letn</span>(<span style=color:#a6e22e>x4</span>,<span style=color:#a6e22e>y4</span>))<span style=color:#f92672>/</span><span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>m2</span><span style=color:#f92672>-</span><span style=color:#a6e22e>m1</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(isNaN(<span style=color:#a6e22e>angle</span>)){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#a6e22e>angle</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>0</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>=</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span><span style=color:#f92672>+</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }</span></span></code></pre></div></div></details><ul><li>La funcion move es un movimiento relativo (desde donde se encuentra) de la figura segun los parametros que se le dan.</li><li>La funcion escalat escala el ancho y alto de la figura, aumentandolo entre mas se aleja de la figura y reduciendolo entre mas se acerca, teniendo como referencia el punto inicial de escalado.</li><li>La funcion rotate gira la figura segun los puntos inicial y final dados del mouse, funcionando como si la figura tuviera un disco alrededor.</li></ul><p>Los Metodos addKeyFram() y deleteKeyFram() permiten agregar o eliminar respectivamente el KeyFrame actual, guardando las variables que tiene la figura actualmente y ordenando los keyFrames o eliminando el KeyFrame de existir en esa instancia de Tiempo.</p><p>La linea de tiempo interactua directamente con la funcion changeTime(), la cual utiliza el metodo keyss() como apoyo para conseguir los valores que debe tener la figura en esa instancia de tiempo, y la misma se apoya middle() que calcula los valores en un tiempo usando la razon de cambio de dos keyFrames.</p><details open><summary>changeTime</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>changeTime</span>(<span style=color:#a6e22e>Time</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>keya</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>kisy</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>keya</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>keya</span>[<span style=color:#ae81ff>0</span>]]<span style=color:#f92672>=</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span>,<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span>]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyss</span>(<span style=color:#a6e22e>Time</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>//print(key)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>w</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span><span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rotation</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>key</span>[<span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>time</span><span style=color:#f92672>=</span><span style=color:#a6e22e>Time</span>
</span></span><span style=display:flex><span>  }</span></span></code></pre></div></div></details><p>Lo primero que realiza changeTime es revisar si estamos en un keyFrame, y de ser asi actualiza el keyFrame para que guarde las modificaciones hechas.
Luego le pide a keyss las variables para el tiempo que se va a pasar y reemplaza las variables de la figura con ellos, junto con la actualizacion del tiempo actual.</p><details open><summary>keyss</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>keyss</span>(<span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span><span style=color:#f92672>==</span><span style=color:#ae81ff>1</span>){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>up</span>, <span style=color:#a6e22e>down</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>up</span><span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>down</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&gt;</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>.<span style=color:#a6e22e>length</span>;<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>==</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>][<span style=color:#ae81ff>0</span>]<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>down</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>]
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>up</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>keyFrames</span>[<span style=color:#a6e22e>i</span>]
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>middle</span>(<span style=color:#a6e22e>down</span>,<span style=color:#a6e22e>up</span>,<span style=color:#a6e22e>timees</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>down</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }</span></span></code></pre></div></div></details><p>keyss tiene un caso especial ademas del utilizado en caso de que solo exista un keyFrame, que ocurre cuando el tiempo actual es menor a el primer keyFrame, en ese caso devuelve ese keyFrame, en cualquier otro caso simplemente encuentra los keyFrames que rodean esa zona de tiempo (o el keyFrame de ese frame de existir) y retorna su razon por medio de middle.</p><details open><summary>middle</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#a6e22e>middle</span>(<span style=color:#a6e22e>down</span>,<span style=color:#a6e22e>up</span>,<span style=color:#a6e22e>timees</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>difTim</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dx</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>1</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dy</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>2</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>2</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dw</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>3</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>3</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dh</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>4</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>4</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dr</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>up</span>[<span style=color:#ae81ff>5</span>]<span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>5</span>])<span style=color:#f92672>/</span><span style=color:#a6e22e>difTim</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>timb</span><span style=color:#f92672>=</span><span style=color:#a6e22e>timees</span><span style=color:#f92672>-</span><span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dx</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>2</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dy</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>3</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dw</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>4</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dh</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>,<span style=color:#a6e22e>down</span>[<span style=color:#ae81ff>5</span>]<span style=color:#f92672>+</span><span style=color:#a6e22e>dr</span><span style=color:#f92672>*</span><span style=color:#a6e22e>timb</span>]
</span></span><span style=display:flex><span>  }</span></span></code></pre></div></div></details><p>middle() es una funcion que recibe cada variable consigue su razon de cambio, y retorna el valor base (el del keyFrame de inicio) agregandole la razon sobre el tiempo extra entre el inicial y el actual.</p><p>El resto de codigo es la lectura del mouse y otraas variables globales para interactuar con la figura.</p><blockquote class="book-hint danger"><strong>Valores Perdidos</strong><br>Notece que cuando se realizan modificaciones en un frame que no es keyFrame y nos desplazamos a otro frame, estos cambios se pierden debido a que no hay ninguna transicion que ocurra con esos datos, si en cambio modificamos un keyFrame o creamos uno nuevo con los cambios, estas modificaciones seran notables con sus transiciones en la linea del tiempo</blockquote><h2 id=resultado>Resultado
<a class=anchor href=#resultado>#</a></h2><iframe id=KeyFrames style=width:440px;height:640px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/visualcomp/sketches/KeyFrames.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=conclusiones>Conclusiones
<a class=anchor href=#conclusiones>#</a></h2><ul><li>La coherencia temporal permite a una animacion tener la coherencia necesaria para sentirla como una unidad.</li><li>Los keyFrames son muy utiles en casi cualquier animacion por que dan una perspectiva de lo que se busca conseguir.</li></ul><h2 id=trabajos-futuros>Trabajos Futuros
<a class=anchor href=#trabajos-futuros>#</a></h2><p>Aunque es bastante completa la interaccion de la figura, aun es posible agregarle diversas cosas, ya sea que permitan facilitar la interaccion como una mejor forma de seleccionar o ver los keyFrames, hasta la posibilidad de manipular varias figuras a la vez para crear animaciones mas complejas.</p><h3 id=extra>Extra
<a class=anchor href=#extra>#</a></h3><p>La animacion de la gota del kinegram en esta apliacion</p><iframe id=KeyFrames2 style=width:440px;height:640px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/visualcomp/sketches/KeyFrames2.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=resources>Resources
<a class=anchor href=#resources>#</a></h2><ul><li><p><a href=https://visualcomputing.github.io/docs/visual_illusions/temporal_coherence/>Guia y Ejercicio</a></p></li><li><p><a href=https://es.wikipedia.org/wiki/Fotograma>Frame</a></p></li><li><p><a href=https://en.wikipedia.org/wiki/Key_frame>KeyFrames</a></p></li><li><p><a href=https://github.com/VisualComputing/nub/blob/master/examples/basics/KeyFrames/KeyFrames.pde>nub library</a></p></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://geramirezl.github.io/visualcomp/commit/04d77e8f665364f8f1690f394314feee59960c80 title='Last modified by FabianMontes | April 3, 2023' target=_blank rel=noopener><img src=/visualcomp/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 3, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#ejercicio-6>Ejercicio 6</a><ul><li><a href=#introduccion>Introduccion</a></li><li><a href=#transfondo-o-teoria>Transfondo o Teoria</a><ul><li><a href=#frames>Frames</a></li><li><a href=#transición-y-transformación>Transición y transformación.</a></li></ul></li><li><a href=#linea-de-tiempo>Linea de Tiempo</a></li><li><a href=#codigo-utilizado>Codigo utilizado</a></li><li><a href=#resultado>Resultado</a></li><li><a href=#conclusiones>Conclusiones</a></li><li><a href=#trabajos-futuros>Trabajos Futuros</a><ul><li><a href=#extra>Extra</a></li></ul></li><li><a href=#resources>Resources</a></li></ul></li></ul></nav></div></aside></main></body></html>